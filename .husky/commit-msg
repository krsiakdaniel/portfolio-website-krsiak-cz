#!/bin/sh
# Commit message validation for Conventional Commits
# Format: type(scope): emoji description

commit_regex='^(build|chore|cicd|docs|feature|fix|hotfix|localization|performance|refactor|revert|style|test)\([a-z0-9\-]+\): (ðŸ—ï¸|ðŸ› ï¸|âš™ï¸|ðŸ“|âœ¨|ðŸ›|ðŸ”¥|ðŸ‡¬ðŸ‡§|ðŸš€|ðŸ‘·|âª|ðŸŽ¨|ðŸŽ­|ðŸƒ) .{1,}'

error_msg="Aborting commit. Your commit message is invalid.

Expected format: type(scope): emoji description

Available types:
- aria: â™¿ Website accessibility
- build: ðŸ—ï¸ - Changes that affect the build system or external dependencies
- chore: ðŸ› ï¸ - Maintenance tasks that don't modify src or test files
- cicd: âš™ï¸ - Changes to CI/CD configuration files and scripts
- docs: ðŸ“ - Documentation only changes
- feature: âœ¨ - New features
- fix: ðŸ› - Bug fixes
- hotfix: ðŸ”¥ - Critical fixes that need immediate attention
- localization: ðŸ‡¬ðŸ‡§ - Internationalization and localization changes
- performance: ðŸš€ - Performance improvements
- refactor: ðŸ‘· - Code changes that neither fix bugs nor add features
- revert: âª - Reverts a previous commit
- style: ðŸŽ¨ - Code style changes (formatting, missing semicolons, etc.)
- test(e2e): ðŸŽ­ - End-to-end test changes
- test(jest): ðŸƒ - Unit test changes

Examples:
- feature(header): âœ¨ Add responsive navigation menu
- fix(button): ðŸ› Fix hover state styling
- docs(readme): ðŸ“ Update installation instructions
- test(jest): ðŸƒ Add user authentication tests"

if ! grep -qE "$commit_regex" "$1"; then
  echo "$error_msg" >&2
  exit 1
fi

echo "âœ… Commit message format is valid!"
