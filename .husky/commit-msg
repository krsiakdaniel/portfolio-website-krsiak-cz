#!/bin/sh
# Format: type(scope): EMOJI description

commit_regex='^(aria|build|chore|cicd|docs|feature|fix|hotfix|localization|performance|refactor|revert|style|test)\([a-z0-9\-]+\): (â™¿|ðŸ—ï¸|ðŸ› ï¸|âš™ï¸|ðŸ“|âœ¨|ðŸ›|ðŸ”¥|ðŸ‡¬ðŸ‡§|ðŸš€|ðŸ‘·|âª|ðŸŽ¨|ðŸŽ­|ðŸƒ) .{1,}'

error_msg="âŒ Aborting because 'commit message' is NOT VALID!

â„¹ï¸ Expected 'commit message' format is 'type(scope): EMOJI description'

Available formats:

- aria(): â™¿ Website accessibility
- build(): ðŸ—ï¸ - Changes that affect the build system or external dependencies
- chore(): ðŸ› ï¸ - Maintenance tasks that don't modify src or test files
- cicd(): âš™ï¸ - Changes to CI/CD configuration files and scripts
- docs(): ðŸ“ - Documentation only changes
- feature(): âœ¨ - New features
- fix(): ðŸ› - Bug fixes
- hotfix(): ðŸ”¥ - Critical fixes that need immediate attention
- localization(): ðŸ‡¬ðŸ‡§ - Internationalization and localization changes
- performance(): ðŸš€ - Performance improvements
- refactor(): ðŸ‘· - Code changes that neither fix bugs nor add features
- revert(): âª - Reverts a previous commit
- style(): ðŸŽ¨ - Code style changes (formatting, missing semicolons, etc.)
- test(e2e): ðŸŽ­ - End-to-end test changes
- test(jest): ðŸƒ - Unit test changes

Examples:

- aria(navigation): â™¿ Add ARIA labels to main navigation menu
- build(dependencies): ðŸ—ï¸ Update Next.js to version 15.2
- chore(cleanup): ðŸ› ï¸ Remove unused dependencies from package.json
- cicd(github): âš™ï¸ Add automated deployment workflow
- docs(readme): ðŸ“ Update installation instructions for Bun
- feature(portfolio): âœ¨ Add new project showcase component
- fix(responsive): ðŸ› Fix mobile navigation menu collapse issue
- hotfix(security): ðŸ”¥ Patch XSS vulnerability in contact form
- localization(czech): ðŸ‡¬ðŸ‡§ Add Czech language support for portfolio
- performance(images): ðŸš€ Optimize WebP image loading with lazy loading
- refactor(components): ðŸ‘· Extract reusable Button component
- revert(navigation): âª Revert navigation changes that broke mobile layout
- style(prettier): ðŸŽ¨ Format all TypeScript files with Prettier
- test(e2e): ðŸŽ­ Add Playwright tests for portfolio navigation
- test(jest): ðŸƒ Add unit tests for utility functions"

if ! grep -qE "$commit_regex" "$1"; then
  echo "$error_msg" >&2
  exit 1
fi

echo "âœ… Commit message format is VALID."
